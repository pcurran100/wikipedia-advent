     name: Deploy static Next site to Pages

     on:
       push:
         branches: [main]
       workflow_dispatch:

     permissions:
       contents: read
       pages: write
       id-token: write

     concurrency:
       group: github-pages
       cancel-in-progress: true

     jobs:
       build:
         runs-on: ubuntu-latest
         env:
           NEXT_PUBLIC_BASE_PATH: ""    # leave empty for wiki-advent.com
         steps:
           - uses: actions/checkout@v4
           - uses: actions/setup-node@v4
             with:
               node-version: 20
               cache: npm
           - run: npm ci
           - run: npm run lint
           - run: npm run build         # writes ./out because of output: "export"
           - uses: actions/upload-pages-artifact@v3
             with:
               path: out

       deploy:
         runs-on: ubuntu-latest
         needs: build
         environment:
           name: github-pages
           url: ${{ steps.deploy.outputs.page_url }}
         steps:
           - uses: actions/deploy-pages@v4
             id: deploy